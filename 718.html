<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Porsche 718</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="/css/styles.css" />
    <link rel="stylesheet" href="/css/718.css" />
    <link rel="shortcut icon" href="/assets/Porsche-logo.png" type="image/x-icon">
    <!-- Sweet Alert 2 para los mensajes de alerta -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.min.css">
  </head>
  <body class="bg-light">
    <header id="header">
      <nav class="navbar navbar-dark navbar-custom">
        <div class="container-fluid">
          <button
            class="navbar-toggler"
            type="button"
            data-bs-toggle="offcanvas"
            data-bs-target="#offcanvasMenu"
            aria-controls="offcanvasMenu"
            aria-label="Toggle menu"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <a class="navbar-brand" href="#">
            <img
              src="assets/logo_blanco.png"
              alt="Porsche Logo"
              height="300"
              style="object-fit: contain;"
            />
          </a>
        </div>
      </nav>

      <div
        class="offcanvas offcanvas-start offcanvas-custom"
        tabindex="-1"
        id="offcanvasMenu"
        aria-labelledby="offcanvasMenuLabel"
      >
        <div class="offcanvas-header border-bottom border-white">
          <button
            type="button"
            class="btn-close btn-close-white text-reset"
            data-bs-dismiss="offcanvas"
            aria-label="Close"
          ></button>
        </div>
        <div class="offcanvas-body">
          <ul class="list-unstyled menu-options">
            <li><a href="index.html" class="text-decoration-none">Inicio</a></li>
            <li><a href="myporsche.html" class="text-decoration-none">My Porsche</a></li>
            <li><a href="contact.html" class="text-decoration-none">Contacto</a></li>
          </ul>
        </div>
      </div>

      <div
        class="offcanvas offcanvas-end offcanvas-custom"
        tabindex="-1"
        id="offcanvasDetails"
        aria-labelledby="offcanvasDetailsLabel"
      >
        <div class="offcanvas-header border-bottom border-white">
          <h5 class="offcanvas-title" id="offcanvasDetailsLabel">
            Detalles Técnicos
          </h5>
          <button
            type="button"
            class="btn-close btn-close-white text-reset"
            data-bs-dismiss="offcanvas"
            aria-label="Close"
          ></button>
        </div>
        <div class="offcanvas-body">
          <h6>Especificaciones:</h6>
          <ul>
            <li><strong>Aceleración:</strong> 0 - 100 km/h en 4.2 s</li>
            <li><strong>Potencia:</strong> 350 HP</li>
            <li><strong>Velocidad máxima:</strong> 275 km/h</li>
            <li><strong>Motor:</strong> 4 cilindros bóxer turbo</li>
            <li><strong>Caja de cambios:</strong> PDK de 7 velocidades</li>
          </ul>
          <p>
            El Porsche 718 Cayman ofrece un equilibrio perfecto entre deportividad y elegancia, proporcionando una experiencia de manejo dinámica y emocionante.
          </p>
          <p>
            Su diseño atemporal, tecnología de vanguardia y precisión en cada detalle hacen de este deportivo una opción inigualable para los entusiastas de la conducción.
          </p>
        </div>
      </div>
    </header>

    <div class="container d-flex flex-column align-items-center">
      <div class="video-container">
        <video
          src="/assets/718/718_1.mp4"
          autoplay
          muted
          loop
          playsinline
          class="w-100"
        ></video>
        <img
          src="assets/718/718.png"
          alt="Porsche 718"
          class="overlay-img"
        />
        <img
          src="assets/718/718.avif"
          alt="Porsche 718 deportivo"
          class="overlay-font"
        />
      </div>

      <div class="text-container text-center">
        <div class="mt-4">
          <h1 class="fw-bold">718 Cayman Style Edition</h1>
          <p class="text-uppercase text-muted">Gasolina</p>
          <p class="h3 text-dark">MXN 1,548,000.00</p>
          <button class="btn btn-dark btn-lg mt-3" id="btnComprar718">Comprar</button>
        </div>

        <div class="row mt-4 align-items-center">
          <div class="col-md-6 text-start">
            <h1 class="fw-bold">4.9 s</h1>
            <p class="text text-muted">
              Aceleración de 0 - 100 km/h
            </p>

            <h1 class="fw-bold">350 HP</h1>
            <p class="text text-muted">
              Potencia del motor
            </p>

            <h1 class="fw-bold">275 km/h</h1>
            <p class="text text-muted">Velocidad máxima</p>

            <button
              class="btn btn-dark btn-lg mt-3"
              data-bs-toggle="offcanvas"
              data-bs-target="#offcanvasDetails"
              aria-controls="offcanvasDetails"
            >
              Todos los detalles técnicos
            </button>
          </div>
          <div class="col-md-6">
            <img
              src="assets/718/718_2-removebg-preview.png"
              alt="Porsche 718 lateral"
              class="img-fluid"
            />
          </div>
        </div>

        <div class="mt-4">
          <img
            src="assets/718/718-removebg.png"
            alt="Porsche 718"
            class="img-fluid small-img"
          />
        </div>

        <div class="mt-4">
          <custom-video-player
            src="/assets/718/718-2.mp4"
            autoplay
            muted
            loop
          ></custom-video-player>
        </div>

        <div class="mt-4 black-box position-relative">
          <div class="black-box-content text-light text-start">
            <h2 class="fw-bold display-4">Aquí es donde la creatividad se une a la deportividad</h2>
            <p class="mt-3">
              El secreto del éxito para deportistas excepcionales: la creatividad. Entrenan diferente, rompen las normas y forjan un nuevo estilo. Cualquiera que conduzca uno de los modelos 718 Style Edition deja claro a primera vista que comparte esta mentalidad.
            </p>
          </div>
          <div class="position-relative" style="height: 600px; overflow: hidden;">
            <img
              src="assets/718/718-4.avif"
              alt="Porsche 718 fondo"
              class="black-box-image-behind"
            />
            <img
              src="assets/718/718-3.avif"
              alt="Porsche 718 superpuesto"
              class="black-box-image-front"
            />
          </div>
        </div>
      </div>
    </div>

    <div class="container-fluid my-5 px-0">
      <h2 class="mb-4 text-center fw-bold">
        Aspectos destacados del Porsche 718 Cayman.
      </h2>
      <div id="destacadosCarousel" class="carousel slide" data-bs-ride="carousel">
        <div class="carousel-inner">
          <div class="carousel-item active">
            <div class="row g-0">
              <div class="col-md-6">
                <div class="card h-100 border-0">
                  <img
                    src="assets/718/carrusel1.avif"
                    class="card-img-top"
                    alt="Diseño deportivo"
                  />
                  <div class="card-body">
                    <h5 class="card-title fw-bold">Arte urbano al estilo Porsche</h5>
                    <p class="card-text">
                      Una declaración de diseno que transforma cada carretera y cada curva en una emocionante obra de arte. Los colores frescos y los armoniosos paquetes de contraste en color Blanco o Negro caracterizan el estilo individual.
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card h-100 border-0">
                  <img
                    src="assets/718/carrusel2.avif"
                    class="card-img-top"
                    alt="Iluminación LED"
                  />
                  <div class="card-body">
                    <h5 class="card-title fw-bold">Contraste</h5>
                    <p class="card-text">
                      Las salidas de escape deportivas de acero inoxidable en color Negro y el paquete de contraste también en color Negro con sus expresivas franjas decorativas en combinación, por ejemplo,  con el color exterior Gris Artic, ofrecen un estilo claro
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="carousel-item">
            <div class="row g-0">
              <div class="col-md-6">
                <div class="card h-100 border-0">
                  <img
                    src="assets/718/carrusel3.avif"
                    class="card-img-top"
                    alt="Agilidad en cada curva"
                  />
                  <div class="card-body">
                    <h5 class="card-title fw-bold">Rines</h5>
                    <p class="card-text">
                      Los rines 718 Spyder de 20 pulgadas, pintados opcionalmente en color Blanco o Negro, complemenntarán dinámicamente, el expresivo exterior con la carretera.
                    </p>
                  </div>
                </div>
              </div>
              <div class="col-md-6">
                <div class="card h-100 border-0">
                  <img
                    src="assets/718/carrusel4.avif"
                    class="card-img-top"
                    alt="Tecnología avanzada"
                  />
                  <div class="card-body">
                    <h5 class="card-title fw-bold">Interior con estilo</h5>
                    <p class="card-text">
                      Las costuras de contrate en color Crayón crean sutiles acentos en combinación con el paquete de cuero o el equipamiento opcional de cuero en colo Negro. También se incluyen detalles tales como las molduras de acceso de las puertas iluminadas en acero inoxidable.
                    </p>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <button
          class="carousel-control-prev"
          type="button"
          data-bs-target="#destacadosCarousel"
          data-bs-slide="prev"
        >
          <span class="carousel-control-prev-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Anterior</span>
        </button>
        <button
          class="carousel-control-next"
          type="button"
          data-bs-target="#destacadosCarousel"
          data-bs-slide="next"
        >
          <span class="carousel-control-next-icon" aria-hidden="true"></span>
          <span class="visually-hidden">Siguiente</span>
        </button>
      </div>
    </div>

    <div id="pasarelaCompraContainer"></div>

    <script src="/components/custom-video-player.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.all.min.js"></script>
    <script src="/components/utils.js"></script>
    <script type="module" src="/components/auth.js"></script>
    <script>
      const originalFetch = window.fetch;
      window.fetch = function(url, options) {
        if (url.includes('.well-known/appspecific/com.chrome.devtools.json')) {
          return new Promise((resolve) => {
            resolve({ ok: true, json: () => Promise.resolve({}) });
          });
        }
        return originalFetch(url, options);
      };
    </script>
    <script type="module">
      import { iniciarProcesoCompra, procesarCompra } from '/components/compra.js';
      
      const MODELO_718 = {
        id: "718",
        nombre: "718 Cayman Style Edition",
        precio: 1548000
      };
      
      document.addEventListener('DOMContentLoaded', function() {
        // Cargar el modal de pasarela
        fetch('/components/pasarela-compra.html')
          .then(response => {
            if (!response.ok) {
              throw new Error(`Error al cargar pasarela: ${response.status}`);
            }
            return response.text();
          })
          .then(html => {
            document.getElementById('pasarelaCompraContainer').innerHTML = html;
            console.log('Pasarela de compra cargada correctamente');
            
            configurarBotonCompra();
            // Configurar botón de completar compra
            const botonComprar = document.getElementById('botonComprar');
            if (botonComprar) {
              botonComprar.addEventListener('click', procesarCompra);
            }
          })
          .catch(error => {
            console.error('Error al cargar pasarela de compra:', error);
            alert('Error al cargar la pasarela de compra. Por favor, recargue la página.');
          });
      });

      // Función para configurar el botón de compra
      function configurarBotonCompra() {
        const btnComprar = document.getElementById('btnComprar718');
        if (!btnComprar) {
          console.error('No se encontró el botón de compra con ID: btnComprar718');
          return;
        }
        
        btnComprar.addEventListener('click', function() {
          console.log('Botón de compra clickeado');
          // Verificar si el usuario está autenticado
          if (!verificarAutenticacion()) {
            const currentPage = window.location.pathname.split('/').pop() || 'index.html';
            localStorage.setItem('redirect_after_login', currentPage);
            
            if (window.Swal) {
              Swal.fire({
                title: 'Iniciar sesión',
                text: 'Debe iniciar sesión para realizar la compra',
                icon: 'info',
                confirmButtonText: 'Ir a iniciar sesión'
              }).then(() => {
                window.location.href = '/myporsche.html';
              });
            } else {
              alert('Debe iniciar sesión para continuar');
              window.location.href = '/myporsche.html';
            }
            return;
          }
          
          // Iniciar proceso de compra
          iniciarProcesoCompra(MODELO_718.id, MODELO_718.nombre, MODELO_718.precio);
        });
      }
    </script>
  </body>
</html>
