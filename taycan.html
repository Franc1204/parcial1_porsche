<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Video del Taycan</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="shortcut icon" href="assets/Porsche-logo.png" type="image/x-icon">
  <link rel="stylesheet" href="/css/styles.css" />
  <link rel="stylesheet" href="/css/taycan.css" />
  <!-- Sweet Alert 2 para los mensajes de alerta -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.min.css">
</head>
<body class="bg-light">
  <header id="header">
      <nav class="navbar navbar-dark navbar-custom">
        <div class="container-fluid">
          <button class="navbar-toggler" type="button" data-bs-toggle="offcanvas" data-bs-target="#offcanvasMenu" aria-controls="offcanvasMenu" aria-label="Toggle menu">
            <span class="navbar-toggler-icon"></span>
          </button>
          <a class="navbar-brand" href="#">
            <img src="assets/logo_blanco.png" alt="Porsche Logo" height="300" style="object-fit: contain;">
          </a>
        </div>
      </nav>
      <div class="offcanvas offcanvas-start offcanvas-custom" tabindex="-1" id="offcanvasMenu" aria-labelledby="offcanvasMenuLabel">
        <div class="offcanvas-header border-bottom border-white">
          <button type="button" class="btn-close btn-close-white text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <ul class="list-unstyled menu-options">
            <li><a href="index.html" class="text-decoration-none">Inicio</a></li>
            <li><a href="myporsche.html" class="text-decoration-none">My Porsche</a></li>
            <li><a href="contact.html" class="text-decoration-none">Contacto</a></li>
          </ul>
        </div>
      </div>
      <div class="offcanvas offcanvas-end offcanvas-custom" tabindex="-1" id="offcanvasDetails" aria-labelledby="offcanvasDetailsLabel">
        <div class="offcanvas-header border-bottom border-white">
          <h5 class="offcanvas-title" id="offcanvasDetailsLabel">Detalles Técnicos</h5>
          <button type="button" class="btn-close btn-close-white text-reset" data-bs-dismiss="offcanvas" aria-label="Close"></button>
        </div>
        <div class="offcanvas-body">
          <h6>Especificaciones:</h6>
          <ul>
            <li><strong>Aceleración:</strong> 0 - 100 km/h en 2.8 s</li>
            <li><strong>Potencia:</strong> 650 kW / 884 HP</li>
            <li><strong>Velocidad máxima:</strong> 250 km/h</li>
            <li><strong>Autonomía:</strong> 400 km (estimado)</li>
            <li><strong>Carga rápida:</strong> Compatible con Ionity y otros cargadores rápidos</li>
          </ul>
          <p>
            El Taycan Cross Turismo combina un rendimiento deportivo excepcional con la eficiencia de la tecnología eléctrica, ofreciendo una experiencia única en cada viaje.
          </p>
          <p>
            Su diseño aerodinámico, sistemas avanzados de asistencia al conductor y una ingeniería de punta lo posicionan como uno de los vehículos eléctricos más innovadores del mercado.
          </p>
        </div>
      </div>
  </header>
  <div class="container d-flex flex-column align-items-center">
    <div class="video-container">
      <video src="/assets/taycan/taycan-trailer.mp4" autoplay muted loop playsinline class="w-100"></video>
      <img src="assets/taycan/taycan.png" alt="Taycan" class="overlay-img">
      <img src="assets/taycan/taycan2.avif" alt="Taycan-carro" class="overlay-font">
    </div>
    <div class="text-container text-center">
      <div class="mt-4">
        <h1 class="fw-bold">Taycan Cross Turismo</h1>
        <p class="text-uppercase text-muted">Eléctrico</p>
        <p class="h3 text-dark">MXN 3,200,000.00</p>
        <button class="btn btn-dark btn-lg mt-3" id="btnComprarTaycan">Comprar</button>
      </div>
      <div class="row mt-4 align-items-center">
        <div class="col-md-6 text-start">
          <h1 class="fw-bold">2.8 s</h1>
          <p class="text text-muted">Aceleración de 0 - 100 km/h con Launch Control</p>
          <h1 class="fw-bold">650 kW / 884 HP</h1>
          <p class="text text-muted">Potencia Overboost con Launch Control hasta (kW)/Potencia Overboost con Launch Control hasta (HP)</p>
          <h1 class="fw-bold">250 km/h</h1>
          <p class="text text-muted">Velocidad máxima</p>
          <button class="btn btn-dark btn-lg mt-3" data-bs-toggle="offcanvas" data-bs-target="#offcanvasDetails" aria-controls="offcanvasDetails">Todos los detalles técnicos</button>
        </div>
        <div class="col-md-6">
          <img src="assets/taycan/taycan3.avif" alt="Taycan3" class="img-fluid">
        </div>
      </div>
      <div class="mt-4">
        <img src="assets/taycan/taycanupscale.png" alt="Taycan" class="img-fluid small-img">
      </div>
      <div class="mt-4">
        <custom-video-player src="/assets/taycan/video.mp4" autoplay muted loop></custom-video-player>
      </div>
      <div class="mt-4 black-box position-relative">
        <div class="black-box-content text-light text-start">
          <h2 class="fw-bold display-4">Overfeel</h2>
          <p class="mt-3">
            La sensación desatada de conducir un vehículo deportivo eléctrico especialmente versátil: el nuevo Taycan Cross Turismo hace que un estilo de vida activo esté aún más cargado de energía. La distancia al suelo es aún más independiente. Y la vida cotidiana menos cotidiana.
          </p>
        </div>
        <img src="assets/taycan/taycan4_5.avif" alt="Taycan fondo detrás" class="overlap-img-behind">
        <img src="assets/taycan/taycan4.avif" alt="Taycan superpuesto" class="overlap-img">
      </div>
    </div>
  </div>
  <div class="container mt-5">
    <div class="row">
      <div class="col-md-6 position-relative">
        <img src="assets/taycan/taycan5.avif" alt="Persona y Taycan" class="img-fluid lower-image">
      </div>
      <div class="col-md-6 position-relative">
        <img src="assets/taycan/taycann6.avif" alt="Taycan Cargando" class="img-fluid upper-image">
        <div class="position-absolute top-50 start-0 text-white p-3" style="transform: translateY(-50%); margin: 1rem;">
          <small class="fw-light">Tiempo de carga</small>
          <h1 class="display-1 fw-bold">18</h1>
          <p class="fs-3">minutes</p>
          <h4>Ionity</h4>
          <p class="mt-3"><strong>Carga Porsche</strong><br />Más información sobre nuestras soluciones de carga</p>
        </div>
      </div>
    </div>
  </div>
  <div class="container-fluid my-5 px-0">
    <h2 class="mb-4 text-center fw-bold">Aspectos destacados del Taycan Cross Turismo.</h2>
    <div id="destacadosCarousel" class="carousel slide" data-bs-ride="carousel">
      <div class="carousel-inner">
        <div class="carousel-item active">
          <div class="row g-0">
            <div class="col-md-6">
              <div class="card h-100 border-0">
                <img src="assets/taycan/carrusel1.avif" class="card-img-top" alt="Diseño Cross Turismo">
                <div class="card-body">
                  <h5 class="card-title fw-bold">Diseño Cross Turismo.</h5>
                  <p class="card-text">
                    Expresión ideal de la libertad centrada en interior y trazos deportivos específicos, faldones laterales, molduras y pasos de rueda ensanchados...
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card h-100 border-0">
                <img src="assets/taycan/carrusel2.avif" class="card-img-top" alt="Faros">
                <div class="card-body">
                  <h5 class="card-title fw-bold">Faros</h5>
                  <p class="card-text">
                    Reconocible desde lejos, los de 4 puntos icónicos ofrecen un diseño inconfundible...
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="carousel-item">
          <div class="row g-0">
            <div class="col-md-6">
              <div class="card h-100 border-0">
                <img src="assets/taycan/carrusel3.avif" class="card-img-top" alt="Dinámica">
                <div class="card-body">
                  <h5 class="card-title fw-bold">Dinámica</h5>
                  <p class="card-text">
                    La tracción total activa y el chasis adaptativo logran un comportamiento extremadamente deportivo en cualquier terreno...
                  </p>
                </div>
              </div>
            </div>
            <div class="col-md-6">
              <div class="card h-100 border-0">
                <img src="assets/taycan/carrusel4.avif" class="card-img-top" alt="E-Performance">
                <div class="card-body">
                  <h5 class="card-title fw-bold">E-Performance</h5>
                  <p class="card-text">
                    Diseño futurista y minimalista, con panel de instrumentos digital curvo, una pantalla central para infoentretenimiento y otra para el pasajero...
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <button class="carousel-control-prev" type="button" data-bs-target="#destacadosCarousel" data-bs-slide="prev">
        <span class="carousel-control-prev-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Anterior</span>
      </button>
      <button class="carousel-control-next" type="button" data-bs-target="#destacadosCarousel" data-bs-slide="next">
        <span class="carousel-control-next-icon" aria-hidden="true"></span>
        <span class="visually-hidden">Siguiente</span>
      </button>
    </div>
  </div>

  <!-- Contenedor para el modal de pasarela de compra -->
  <div id="pasarelaCompraContainer"></div>
  
  <script src="/components/custom-video-player.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.7.32/dist/sweetalert2.all.min.js"></script>
  <script src="/components/utils.js"></script>
  <script type="module" src="/components/auth.js"></script>
  <script type="module">
    import { iniciarProcesoCompra, procesarCompra } from '/components/compra.js';
    
    const MODELO_TAYCAN = {
      id: "taycan",
      nombre: "Taycan GTS Sport Turismo",
      precio: 3050000
    };
    
    document.addEventListener('DOMContentLoaded', function() {
      // Cargar el modal de pasarela
      fetch('/components/pasarela-compra.html')
        .then(response => {
          if (!response.ok) {
            throw new Error(`Error al cargar pasarela: ${response.status}`);
          }
          return response.text();
        })
        .then(html => {
          document.getElementById('pasarelaCompraContainer').innerHTML = html;
          console.log('Pasarela de compra cargada correctamente');
          
          configurarBotonCompra();
          // Configurar botón de completar compra
          const botonComprar = document.getElementById('botonComprar');
          if (botonComprar) {
            botonComprar.addEventListener('click', procesarCompra);
          }
        })
        .catch(error => {
          console.error('Error al cargar pasarela de compra:', error);
          alert('Error al cargar la pasarela de compra. Por favor, recargue la página.');
        });
    });
    
    function configurarBotonCompra() {
      const btnComprar = document.getElementById('btnComprarTaycan');
      if (!btnComprar) {
        console.error('No se encontró el botón de compra con ID: btnComprarTaycan');
        return;
      }
      
      btnComprar.addEventListener('click', function() {
        // Verificar si el usuario está autenticado
        if (!verificarAutenticacion()) {
          const currentPage = window.location.pathname.split('/').pop() || 'index.html';
          localStorage.setItem('redirect_after_login', currentPage);
          
          if (window.Swal) {
            Swal.fire({
              title: 'Iniciar sesión',
              text: 'Debe iniciar sesión para realizar la compra',
              icon: 'info',
              confirmButtonText: 'Ir a iniciar sesión'
            }).then(() => {
              window.location.href = '/myporsche.html';
            });
          } else {
            alert('Debe iniciar sesión para continuar');
            window.location.href = '/myporsche.html';
          }
          return;
        }
        
        // Iniciar proceso de compra
        iniciarProcesoCompra(MODELO_TAYCAN.id, MODELO_TAYCAN.nombre, MODELO_TAYCAN.precio);
      });
    }
  </script>
</body>
</html>
